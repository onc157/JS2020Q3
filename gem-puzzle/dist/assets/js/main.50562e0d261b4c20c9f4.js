(()=>{"use strict";var e={1095:(e,t,n)=>{function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],o=!0,l=!1,i=void 0;try{for(var s,r=e[Symbol.iterator]();!(o=(s=r.next()).done)&&(n.push(s.value),!t||n.length!==t);o=!0);}catch(e){l=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw i}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function a(e,t,n,s){var r,a=null;try{a=document.createElement(e)}catch(e){throw new Error("Unable to create HTMLElement!")}t&&(r=a.classList).add.apply(r,i(t.split(" "))),n&&Array.isArray(n)?n.forEach((function(e){return e&&a.appendChild(e)})):n&&"object"===l(n)?a.appendChild(n):n&&"string"==typeof n&&(a.innerHTML=n),s&&s.appendChild(a);for(var c=arguments.length,u=new Array(c>4?c-4:0),h=4;h<c;h++)u[h-4]=arguments[h];return u.length&&u.forEach((function(e){var t=o(e,2),n=t[0],l=t[1];""===l&&a.setAttribute(n,""),n.match(/value|id|placeholder|cols|rows|autocorrect|spellcheck|src|style/)?a.setAttribute(n,l):a.dataset[n]=l})),a}function c(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return JSON.parse(window.localStorage.getItem(e)||t)}const h=n.p+"assets/audio/6fcc9b06e8967f9e3e1aa263e357c9b4.wav",m=n.p+"assets/audio/de3e2f7760f09923fde9172380cc13a1.wav";function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=a("div","game-wrapper",[a("div","title","Gem Puzzles!")]),g=a("div","counts-wrapper",[a("div","count count-time","Moves: 0"),a("div","count count-move","Count time!")]),b=a("div","buttons-wrapper",[a("button","button new-game","New Game"),a("button","button save-game","Save Game"),a("button","button load-game","Load Game"),a("button","button sound",'<span class="material-icons">volume_up</span>'),a("button","button score","Score"),a("button","button field-size","Field Size")]),C=a("div","sound-wrapper",[a("audio",null,null,null,["src",h]),a("audio",null,null,null,["src",m])]);new(function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"handlerEvent",(function(e){console.log("e.target.className",e.target.className),n.soundOn&&(C.childNodes[1].currentTime=0,C.childNodes[1].play()),e.target.className.match(/sound/)&&n.switchSound(e),e.target.className.match(/new-game/)&&n.newGame(),e.target.className.match(/button-menu/)&&(n.menu.classList.toggle("menu--active"),console.log("toggle menu")),e.target.className.match(/save-game/)&&n.saveGame(),e.target.className.match(/load-game/)&&n.loadGame(),e.target.className.match(/test-move/)&&n.testMove(),e.target.className.match(/score/)&&n.getScore()})),v(this,"switchSound",(function(e){var t=e.target.lastChild;n.soundOn?(t.innerHTML='<span class="material-icons">volume_off</span>',n.soundOn=!1):(t.innerHTML='<span class="material-icons">volume_up</span>',n.soundOn=!0)})),v(this,"updateCountTimes",(function(){n.countTime+=1,n.seconds=n.countTime%60,n.minutes=Math.floor(n.countTime/60),g.childNodes[1].innerHTML="Time: ".concat(n.minutes,"m : ").concat(n.seconds,"s"),n.timeOut=setTimeout(n.updateCountTimes,1e3)})),this.size=t,this.field=a("div","field",null,y),this.menu=a("div","menu",[a("button","button new-game","New Game"),a("button","button save-game","Save Game"),a("button","button load-game","Load Game"),a("button","button sound",'<span class="material-icons">volume_up</span>'),a("button","button score","Score"),a("button","button field-size","Field Size")],this.field),this.score=a("div","score-wrapper","score"),this.buttons=b,this.sizeCell=100/this.size,this.menuButton=a("div","count button-menu",'<span class="material-icons">build</span>',g),console.log("this.sizeCell:",this.sizeCell),this.soundOn=!0,this.countMoves=0,this.countTime=0,this.backgroundImage="url('../../../assets/img/01.jpg')"}var t,n,o;return t=e,(n=[{key:"init",value:function(){return document.body.prepend(y,g,b,C,this.score),this.buttons.addEventListener("click",this.handlerEvent),this.menuButton.addEventListener("click",this.handlerEvent),this}},{key:"generateField",value:function(){var e=this;this.cells=[];for(var t=function t(){var n=f(Array(Math.pow(e.size,2)-1).keys()).map((function(e){return e+1})).sort((function(){return Math.random()-.5}));n.push(0),console.log(n);for(var o=0,l=0;l<Math.pow(e.size,2);l+=1)if(n[l])for(var i=0;i<l;i+=1)n[i]>n[l]&&(o+=1);console.log("count",o);for(var s=0;s<Math.pow(e.size,2);s+=1)0===n[s]&&(o+=Math.floor(1+s/Math.sqrt(Math.pow(e.size,2))));return console.log("count",o),Math.pow(e.size,2)%2==0&&o%2==0||Math.pow(e.size,2)%2!=0&&o%2!=0?n:t()}(),n=function(n){var o=n%e.size,l=(n-o)/e.size;e.cell=a("div","cell-outer",a("div","cell-inner","".concat(t[n]),null),e.field,["id","".concat(t[n])],["style","top: ".concat(l*e.sizeCell,"%; left: ").concat(o*e.sizeCell,"%;")]),e.cell.style.width="".concat(e.sizeCell,"%"),e.cell.style.height="".concat(e.sizeCell,"%"),e.cells.push({number:t[n],left:o,top:l,item:e.cell,active:!1}),e.cell.firstChild.addEventListener("click",(function(){return e.cellMove(n)})),e.cell.firstChild.style.backgroundImage=e.backgroundImage,e.cell.firstChild.style.backgroundRepiat="no-repiat",e.cell.firstChild.style.backgroundSize="".concat(100*e.size,"%");var i=e.cells[e.cells.length-1].number-1,s=100/(e.size-1);e.cell.firstChild.style.backgroundPosition="".concat(i%e.size*s,"% ").concat(Math.floor(i/e.size)*s,"%")},o=0;o<Math.pow(this.size,2)-1;o+=1)n(o);this.emptyCell={number:this.cells.length+1,left:this.cells.length%this.size,top:(this.cells.length-this.cells.length%this.size)/this.size},this.cells.push(this.emptyCell),console.log(this.cells),this.updateCountTimes()}},{key:"cellMove",value:function(e){var t=this.cells[e];console.log("cell in cellMove",this.cells[e]);var n=Math.abs(this.emptyCell.left-t.left);console.log("this.emptyCell",this.emptyCell),console.log("this.emptyCell.left ",this.emptyCell.left),console.log("leftDiff",n);var o=Math.abs(this.emptyCell.top-t.top);if(console.log("this.emptyCell.top ",this.emptyCell.top),console.log("topDiff",o),this.soundOn&&(C.childNodes[0].currentTime=0,C.childNodes[0].play()),n+o<=1){t.item.style.left="".concat(this.emptyCell.left*this.sizeCell,"%"),t.item.style.top="".concat(this.emptyCell.top*this.sizeCell,"%");var l=[t.left,this.emptyCell.left];this.emptyCell.left=l[0],t.left=l[1];var i=[t.top,this.emptyCell.top];this.emptyCell.top=i[0],t.top=i[1],this.updateCountMove(),this.checkFinish(),console.log(this.cells)}}},{key:"checkFinish",value:function(){var e=this;if(this.cells.forEach((function(t){t.item&&(t.number-1===t.top*e.size+t.left?(t.item.firstChild.classList.add("cell-inner--active"),t.active=!0):t.number-1!==t.top*e.size+t.left&&!0===t.active&&t.item.firstChild.classList.remove("cell-inner--active"))})),this.cells.every((function(t){return t.number-1===t.top*e.size+t.left}))){var t=prompt("Enter your name");setTimeout("alert('".concat(t,", you really good! Your results: ").concat(this.minutes,"m : ").concat(this.seconds,"s and ").concat(this.countMoves," moves')"),300),c("Local result",{name:t,time:"".concat(this.minutes,"m : ").concat(this.seconds,"s"),moves:this.countMoves})}}},{key:"getScore",value:function(){var e=u("Local result"),t=e.name,n=e.time,o=e.moves;this.score.innerHTML="".concat(t,", ").concat(n,", ").concat(o)}},{key:"newGame",value:function(){console.log("new game!"),this.field.remove(),this.field=a("div","field",null,y),this.countTime=0,this.countMoves=0,g.firstChild.innerHTML="Moves: ".concat(this.countMoves),clearTimeout(this.timeOut),this.generateField()}},{key:"saveGame",value:function(){c("Save Game",this.cells),c("Field Size",this.size),console.log("this.cells",this.cells),console.log("saved games")}},{key:"loadGame",value:function(){var e=this;this.cells=[],this.storageCell=[],this.storageCell=u("Save Game"),console.log(this.storageCell),this.size=u("Field Size"),this.sizeCell=100/this.size,console.log(this.size),this.field.remove(),this.field=a("div","field",null,y),this.storageCell.forEach((function(t,n){if(n===e.storageCell.length-1)return e.emptyCell={number:t.number,left:t.left,top:t.top},void e.cells.push(e.emptyCell);e.cell=a("div","cell-outer",a("div","cell-inner","".concat(t.number),null),e.field,["id","".concat(t.number)],["style","top: ".concat(t.top*e.sizeCell,"%; left: ").concat(t.left*e.sizeCell,"%;")]),e.cell.style.width="".concat(e.sizeCell,"%"),e.cell.style.height="".concat(e.sizeCell,"%"),e.cells.push({number:t.number,left:t.left,top:t.top,item:e.cell,active:!1}),e.cell.addEventListener("click",(function(){return e.cellMove(n)}))})),console.log("this.cells end",this.cells)}},{key:"updateCountMove",value:function(){this.countMoves+=1,g.firstChild.innerHTML="Moves: ".concat(this.countMoves),console.log(this.countMoves)}}])&&d(t.prototype,n),o&&d(t,o),e}())(3).init().generateField()}},t={};function n(o){if(t[o])return t[o].exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var o=t.getElementsByTagName("script");o.length&&(e=o[o.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../../"})(),(()=>{var e={179:0},t=[[6981,981],[1095,981]],o=()=>{};function l(){for(var o,l=0;l<t.length;l++){for(var i=t[l],s=!0,r=1;r<i.length;r++){var a=i[r];0!==e[a]&&(s=!1)}s&&(t.splice(l--,1),o=n(n.s=i[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),o}n.x=()=>{n.x=()=>{},s=s.slice();for(var e=0;e<s.length;e++)i(s[e]);return(o=l)()};var i=l=>{for(var i,s,[a,c,u,h]=l,m=0,f=[];m<a.length;m++)s=a[m],n.o(e,s)&&e[s]&&f.push(e[s][0]),e[s]=0;for(i in c)n.o(c,i)&&(n.m[i]=c[i]);for(u&&u(n),r(l);f.length;)f.shift()();return h&&t.push.apply(t,h),o()},s=self.webpackChunkgem_puzzle=self.webpackChunkgem_puzzle||[],r=s.push.bind(s);s.push=i})(),n.x()})();