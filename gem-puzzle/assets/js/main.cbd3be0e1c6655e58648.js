(()=>{"use strict";var e={1423:(e,t,n)=>{function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,s=!1,l=void 0;try{for(var o,r=e[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){s=!0,l=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw l}}return n}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t,n,o){var r,a=null;try{a=document.createElement(e)}catch(e){throw new Error("Unable to create HTMLElement!")}t&&(r=a.classList).add.apply(r,l(t.split(" "))),n&&Array.isArray(n)?n.forEach((function(e){return e&&a.appendChild(e)})):n&&"object"===s(n)?a.appendChild(n):n&&"string"==typeof n&&(a.innerHTML=n),o&&o.appendChild(a);for(var u=arguments.length,c=new Array(u>4?u-4:0),m=4;m<u;m++)c[m-4]=arguments[m];return c.length&&c.forEach((function(e){var t=i(e,2),n=t[0],s=t[1];""===s&&a.setAttribute(n,""),n.match(/value|id|placeholder|cols|rows|autocorrect|spellcheck|src|style/)?a.setAttribute(n,s):a.dataset[n]=s})),a}function u(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return JSON.parse(window.localStorage.getItem(e)||t)}const m=n.p+"assets/audio/6fcc9b06e8967f9e3e1aa263e357c9b4.wav",h=n.p+"assets/audio/de3e2f7760f09923fde9172380cc13a1.wav";function d(e,t){var n=e+Math.random()*(t-e),i=Math.round(n);return i<10&&(i="0".concat(i)),"url('../../../assets/img/".concat(i,".jpg')")}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new(function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"handlerEvent",(function(e){e.target.className.match(/button|material/)&&n.soundOn&&(n.soundWrapper.childNodes[1].currentTime=0,n.soundWrapper.childNodes[1].play()),(e.target.className.match(/sound/)||e.target.innerText.match(/^volume_up$|^volume_off$/))&&n.switchSound(e),e.target.className.match(/new-game/)&&n.newGame(),(e.target.className.match(/button-menu/)||e.target.innerText.match(/build/))&&(n.menu.classList.toggle("menu--active"),n.menuFieldSizeOn&&(n.menuFieldSizeOn=!1,n.menuFieldSize.classList.toggle("menu-field-size--active"))),e.target.className.match(/save-game/)&&n.saveGame(),e.target.className.match(/load-game/)&&n.loadGame(),e.target.className.match(/score/)&&n.getScore(),e.target.className.match(/field-size/)&&n.changeFieldSize(),e.target.className.match(/back/)&&n.menuFieldSizeOn&&(n.menuFieldSizeOn=!1,n.menuFieldSize.classList.toggle("menu-field-size--active")),e.target.className.match(/button-size/)&&(n.size=e.target.id,n.sizeCell=100/n.size,n.newGame(),n.menuFieldSize.classList.toggle("menu-field-size--active")),e.target.className.match(/show-numbers/)&&n.showNumbers(e)})),v(this,"switchSound",(function(e){var t=e.target;n.soundOn?(t.innerHTML='<span class="material-icons">volume_off</span>',n.soundOn=!1,n.btnPress("SOUND OFF")):(t.innerHTML='<span class="material-icons">volume_up</span>',n.soundOn=!0,n.btnPress("SOUND ON"))})),v(this,"showNumbers",(function(e){n.numbersOn?(n.numbersOn=!1,e.target.innerText="Show Numbers",n.btnPress("NUMBERS REMOVED"),n.cells.forEach((function(e){e.item&&e.item.firstChild.classList.remove("cell-inner--show-numbers")}))):(n.numbersOn=!0,e.target.innerText="Hide Numbers",n.btnPress("NUMBERS ADDED"),n.cells.forEach((function(e){e.item&&e.item.firstChild.classList.add("cell-inner--show-numbers")})))})),v(this,"updateCountTimes",(function(){n.countTime+=1,n.seconds=n.countTime%60,n.minutes=Math.floor(n.countTime/60),n.counts.childNodes[1].innerHTML="Time: ".concat(n.minutes,"m : ").concat(n.seconds,"s"),n.timeOut=setTimeout(n.updateCountTimes,1e3)})),this.size=t,this.main=a("div","game-wrapper",[a("div","title","Gem Puzzles by onc157")]),this.fieldWrapper=a("div","field-wrapper",null,this.main),this.field=a("div","field",null,this.fieldWrapper),this.counts=a("div","counts-wrapper",[a("div","count count-time","Moves: 0"),a("div","count count-move","Count time!")]),this.soundWrapper=a("div","sound-wrapper",[a("audio",null,null,null,["src",m]),a("audio",null,null,null,["src",h])]),this.menu=a("div","menu",[a("button","button new-game","New Game"),a("button","button save-game","Save Game"),a("button","button load-game","Load Game"),a("button","button sound",'<span class="material-icons">volume_up</span>'),a("button","button score","Score"),a("button","button field-size","Field Size"),a("button","button show-numbers","Show Numbers")],this.fieldWrapper),this.menuFieldSize=a("div","menu-field-size",[a("button","button button-size","3 x 3",null,["id","3"]),a("button","button button-size","4 x 4",null,["id","4"]),a("button","button button-size","5 x 5",null,["id","5"]),a("button","button button-size","6 x 6",null,["id","6"]),a("button","button button-size","7 x 7",null,["id","7"]),a("button","button button-size","8 x 8",null,["id","8"]),a("button","button back","Back")],this.fieldWrapper),this.buttonPress=a("div","button-press",null,this.fieldWrapper),this.sizeCell=100/this.size,this.menuButton=a("div","count button-menu",'<span class="material-icons">build</span>',this.counts),this.soundOn=!0,this.numbersOn=!1,this.menuFieldSizeOn=!1,this.countMoves=0,this.countTime=0,this.backgroundImage=d(1,20)}var t,n,i;return t=e,(n=[{key:"init",value:function(){return document.body.prepend(this.main,this.counts,this.soundWrapper),this.menuButton.addEventListener("click",this.handlerEvent),this.menu.addEventListener("mousedown",this.handlerEvent),this.menuFieldSize.addEventListener("mousedown",this.handlerEvent),this}},{key:"generateRandomArray",value:function(){var e=f(Array(Math.pow(this.size,2)-1).keys()).map((function(e){return e+1})).sort((function(){return Math.random()-.5}));e.push(0);for(var t=0,n=0;n<Math.pow(this.size,2);n+=1)if(e[n])for(var i=0;i<n;i+=1)e[i]>e[n]&&(t+=1);for(var s=0;s<Math.pow(this.size,2);s+=1)0===e[s]&&(t+=Math.floor(1+s/Math.sqrt(Math.pow(this.size,2))));return Math.pow(this.size,2)%2==0&&t%2==0||Math.pow(this.size,2)%2!=0&&t%2!=0?e:this.generateRandomArray()}},{key:"generateField",value:function(){var e=this;this.cells=[],this.randomNumbers=this.generateRandomArray();for(var t=function(t){var n=t%e.size,i=(t-n)/e.size;e.cell=a("div","cell-outer",a("div","cell-inner","".concat(e.randomNumbers[t]),null),e.field,["id","".concat(e.randomNumbers[t])],["style","top: ".concat(i*e.sizeCell,"%; left: ").concat(n*e.sizeCell,"%;")]),e.cell.style.width="".concat(e.sizeCell,"%"),e.cell.style.height="".concat(e.sizeCell,"%"),e.cells.push({number:e.randomNumbers[t],left:n,top:i,item:e.cell,active:!1}),e.cell.firstChild.style.fontSize="".concat(8/e.size,"rem"),e.cell.firstChild.addEventListener("click",(function(){return e.cellMove(t)})),e.cell.addEventListener("mousedown",(function(n){return e.cellDrag(n,t)})),e.cell.firstChild.style.backgroundImage=e.backgroundImage,e.cell.firstChild.style.backgroundSize="".concat(100*e.size,"%");var s=e.cells[e.cells.length-1].number-1,l=100/(e.size-1);e.cell.firstChild.style.backgroundPosition="".concat(s%e.size*l,"% ").concat(Math.floor(s/e.size)*l,"%")},n=0;n<Math.pow(this.size,2)-1;n+=1)t(n);this.emptyCell={number:this.cells.length+1,left:this.cells.length%this.size,top:(this.cells.length-this.cells.length%this.size)/this.size},this.cells.push(this.emptyCell),this.updateCountTimes()}},{key:"cellMove",value:function(e){var t=this.cells[e],n=Math.abs(this.emptyCell.left-t.left),i=Math.abs(this.emptyCell.top-t.top);if(this.soundOn&&(this.soundWrapper.childNodes[0].currentTime=0,this.soundWrapper.childNodes[0].play()),n+i<=1){t.item.style.left="".concat(this.emptyCell.left*this.sizeCell,"%"),t.item.style.top="".concat(this.emptyCell.top*this.sizeCell,"%");var s=[t.left,this.emptyCell.left];this.emptyCell.left=s[0],t.left=s[1];var l=[t.top,this.emptyCell.top];this.emptyCell.top=l[0],t.top=l[1],this.field.onmouseup=null,this.field.onmousemove=null,this.field.onmouseleave=null,this.checkFinish(),this.updateCountMove()}}},{key:"cellDrag",value:function(e,t){var n=this,i=this.cells[t];Math.abs(this.emptyCell.left-i.left)+Math.abs(this.emptyCell.top-i.top)<=1&&(i.item.style.zIndex="50",i.item.style.transition="0s",this.field.onmouseleave=function(){i.item.style.transition=".5s",setTimeout((function(){i.item.style.zIndex=null}),500),n.cellMove(t)},this.field.onmousemove=function(t){!function(e,t){i.item.style.left="".concat(e,"%"),i.item.style.top="".concat(t,"%")}((t.pageX-n.field.offsetLeft-e.offsetX-n.field.getBoundingClientRect().x-e.target.clientLeft)/n.field.clientWidth*100,(t.pageY-n.field.offsetTop-e.offsetY-n.field.getBoundingClientRect().y-e.target.clientTop)/n.field.clientHeight*100)},this.field.onmouseup=function(){i.item.style.transition=".5s",setTimeout((function(){i.item.style.zIndex=null}),500),n.field.onmouseup=null,n.field.onmousemove=null})}},{key:"checkFinish",value:function(){var e=this;if(this.cells.forEach((function(t){t.item&&(t.number-1===t.top*e.size+t.left?(t.item.firstChild.classList.add("cell-inner--active"),t.active=!0):t.number-1!==t.top*e.size+t.left&&!0===t.active&&t.item.firstChild.classList.remove("cell-inner--active"))})),this.cells.every((function(t){return t.number-1===t.top*e.size+t.left}))){var t=prompt("Enter your name");setTimeout("alert('".concat(t,", you really good! Your results: ").concat(this.minutes,"m : ").concat(this.seconds,"s and ").concat(this.countMoves," moves')"),300),u("Local result",{name:t,time:"".concat(this.minutes,"m : ").concat(this.seconds,"s"),moves:this.countMoves})}}},{key:"getScore",value:function(){var e=c("Local result"),t=e.name,n=e.time,i=e.moves;this.score.innerHTML="".concat(t,", ").concat(n,", ").concat(i)}},{key:"newGame",value:function(){var e=this;this.menu.classList.toggle("menu--active"),setTimeout((function(){e.field.remove(),e.field=a("div","field",null,e.fieldWrapper),e.countTime=0,e.countMoves=0,e.counts.firstChild.innerHTML="Moves: ".concat(e.countMoves),clearTimeout(e.timeOut),e.backgroundImage=d(1,20),e.generateField(),e.btnPress("NEW GAME"),!0===e.numbersOn&&(e.menu.lastChild.innerText="Hide Numbers",e.cells.forEach((function(e){e.item&&e.item.firstChild.classList.add("cell-inner--show-numbers")})))}),500)}},{key:"saveGame",value:function(){u("Save Game",this.cells),u("Field Size",this.size),u("Background Image",this.backgroundImage),u("numbersOn",this.numbersOn),this.btnPress("GAME SAVED")}},{key:"loadGame",value:function(){var e=this;c("Save Game")?(this.cells=[],this.storageCells=[],this.storageCells=c("Save Game"),this.size=c("Field Size"),this.sizeCell=100/this.size,this.backgroundImage=c("Background Image"),this.numbersOn=c("numbersOn"),this.menu.classList.toggle("menu--active"),setTimeout((function(){e.field.remove(),e.field=a("div","field",null,e.fieldWrapper),e.storageCells.forEach((function(t,n){if(n===e.storageCells.length-1)return e.emptyCell={number:t.number,left:t.left,top:t.top},void e.cells.push(e.emptyCell);e.cell=a("div","cell-outer",a("div","cell-inner","".concat(t.number),null),e.field,["id","".concat(t.number)],["style","top: ".concat(t.top*e.sizeCell,"%; left: ").concat(t.left*e.sizeCell,"%;")]),e.cell.firstChild.style.fontSize="".concat(8/e.size,"rem"),e.cell.style.width="".concat(e.sizeCell,"%"),e.cell.style.height="".concat(e.sizeCell,"%"),!0===e.numbersOn&&(e.menu.lastChild.innerText="Hide Numbers",e.cell.firstChild.classList.add("cell-inner--show-numbers")),e.cells.push({number:t.number,left:t.left,top:t.top,item:e.cell,active:!1}),e.cell.addEventListener("click",(function(){return e.cellMove(n)})),e.cell.onmousedown=function(t){e.cellDrag(t,n)},e.cell.firstChild.style.backgroundImage=e.backgroundImage,e.cell.firstChild.style.backgroundRepiat="no-repeat",e.cell.firstChild.style.backgroundSize="".concat(100*e.size,"%");var i=e.cells[e.cells.length-1].number-1,s=100/(e.size-1);e.cell.firstChild.style.backgroundPosition="".concat(i%e.size*s,"% ").concat(Math.floor(i/e.size)*s,"%")}))}),500),this.btnPress("GAME LOADED")):this.btnPress("NO SAVED GAME")}},{key:"changeFieldSize",value:function(){this.menuFieldSizeOn?(this.menuFieldSizeOn=!1,this.menuFieldSize.classList.toggle("menu-field-size--active")):(this.menuFieldSizeOn=!0,this.menuFieldSize.classList.toggle("menu-field-size--active"))}},{key:"updateCountMove",value:function(){this.countMoves+=1,this.counts.firstChild.innerHTML="Moves: ".concat(this.countMoves)}},{key:"btnPress",value:function(e){var t=this;this.buttonPress.classList.toggle("button-press--active"),this.buttonPress.innerText="".concat(e),setTimeout((function(){t.buttonPress.classList.toggle("button-press--active"),t.buttonPress.innerText=""}),1e3)}}])&&b(t.prototype,n),i&&b(t,i),e}())(4).init().generateField()}},t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e+"../../"})(),(()=>{var e={179:0},t=[[6981,981],[1423,981]],i=()=>{};function s(){for(var i,s=0;s<t.length;s++){for(var l=t[s],o=!0,r=1;r<l.length;r++){var a=l[r];0!==e[a]&&(o=!1)}o&&(t.splice(s--,1),i=n(n.s=l[0]))}return 0===t.length&&(n.x(),n.x=()=>{}),i}n.x=()=>{n.x=()=>{},o=o.slice();for(var e=0;e<o.length;e++)l(o[e]);return(i=s)()};var l=s=>{for(var l,o,[a,u,c,m]=s,h=0,d=[];h<a.length;h++)o=a[h],n.o(e,o)&&e[o]&&d.push(e[o][0]),e[o]=0;for(l in u)n.o(u,l)&&(n.m[l]=u[l]);for(c&&c(n),r(s);d.length;)d.shift()();return m&&t.push.apply(t,m),i()},o=self.webpackChunkgem_puzzle=self.webpackChunkgem_puzzle||[],r=o.push.bind(o);o.push=l})(),n.x()})();